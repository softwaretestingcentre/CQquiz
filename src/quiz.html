<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mind Pattern Quiz</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 2em;
      }
      .quiz-step {
        margin-bottom: 2em;
      }
      .options {
        display: flex;
        justify-content: space-between;
        gap: 1em;
        margin-bottom: 1em;
      }
      .options .option-card {
        flex: 1 1 0;
        margin: 0.5em 0;
        padding: 0.7em 0.5em;
        font-size: 1.1em;
        border-radius: 8px;
        border: 1px solid #222;
        background: #f3f3f3;
        color: #222;
        cursor: pointer;
        transition: background 0.2s, border 0.2s;
        user-select: none;
        text-align: center;
        word-break: break-word;
        white-space: normal;
        min-width: 0;
        max-width: 100%;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      .options .option-card.selected {
        background: #cce5ff;
        border: 2px solid #339af0;
        font-weight: bold;
      }
      .options .option-card.disabled {
        opacity: 0.6;
        cursor: not-allowed;
        pointer-events: none;
      }
      .result {
        font-weight: bold;
        margin-top: 2em;
      }
      .details {
        margin-top: 1em;
        color: #555;
        font-size: small;
      }
    </style>
  </head>
  <body>
    <h1>Mind Pattern Quiz</h1>
    <div id="quiz-container">
      <div id="step-1" class="quiz-step">
        <h2>Step 1</h2>
        <h3>Choose one of the cards below that seems most true for you:</h3>
        <div class="options" id="step-1-options"></div>
      </div>
      <div id="step-2" class="quiz-step">
        <h2>Step 2</h2>
        <h3>Choose which of the following two cards is most true for you:</h3>
        <div class="options" id="step-2-options"></div>
      </div>
      <div id="step-3" class="quiz-step" style="display: none">
        <h2>Step 3</h2>
        <h3>
          Read the final card and either confirm your choices or change them if
          you disagree:
        </h3>
        <div class="options" id="step-3-options"></div>
      </div>
      <h2 id="result" class="result" style="display: none"></h2>
      <div id="details" class="details" style="display: none"></div>
      <button id="change-choices" style="display: none" onclick="resetQuiz()">
        Change Choices
      </button>
      <button id="confirm-choice" style="display: none" onclick="showDetails()">
        Confirm Choice
      </button>
    </div>
    <script>
      let selectedOption1 = null;
      let selectedOption2 = null;
      let selectedOption3 = null;

      // Step 2 options for each Step 1 choice
      const step2OptionsMap = {
        A1: ["K2", "V2"],
        V1: ["A2", "K2"],
        K1: ["V2", "A2"],
      };

      // Step 3 options for each Step 1 + Step 2 combination
      const step3OptionsMap = {
        A1: { K2: ["V3"], V2: ["K3"] },
        V1: { A2: ["K3"], K2: ["A3"] },
        K1: { V2: ["A3"], A2: ["V3"] },
      };

      // Mind Pattern results for each Step 1 + Step 2 + Step 3 combination
      const mindPatternMap = {
        A1: { K2: "AKV", V2: "AVK" },
        V1: { A2: "VAK", K2: "VKA" },
        K1: { V2: "KVA", A2: "KAV" },
      };

      const mindPatternStepDescriptions = {
        A1: {
          pattern: "<h4>AUDITORY</h4>",
          description: `
                <p>I'm comfortable talking to large groups of people, even without advance preparation</p>
                <p>I prefer to give verbal reports rather than do a visual presentation or make a model.</p>
                <p>I naturally remember what's said in a conversation</p>
                <p>I speak without pause (no "um"s) and use precise language.</p>
                <p>Words flow out easily in logical order without thinking about it.</p>
                <p>I can multitask auditorily: I can talk with one person and listen to someone else in the background at the same time.</p>
                <p>I tend to be critical of how things are said.</p>
                `,
        },
        V1: {
          pattern: "<h4>VISUAL</h4>",
          description: `
                <p>The first thing I recall of a person or place is the way something or someone looked.</p>
                <p>I prefer to write a report rather than do an oral presentation or make a model.</p>
                <p>The best way for me to organise is to make a list.</p>
                <p>I like to make direct and steady eye contact with the person I'm talking to.</p>
                <p>I'm highly aware of the way I look to other people.</p>
                <p>I can multitask visually: I can read and watch TV at the same time.</p>
                <p>I tend to be critical of how things look.</p>
                `,
        },
        K1: {
          pattern: "<h4>KINESTHETIC</h4>",
          description: `
                <p>I prefer to be on my feet or moving around. A stand-up desk would really help me.</p>
                <p>I prefer to share an experience or make a model as a presentation.</p>
                <p>The best way for me to organise is by making piles.</p>
                <p>I can easily recall what I did and the physical sensation of an experience.</p>
                <p>My natural preference is to start hands-on and experiment by doing.</p>
                <p>I can multitask kinesthetically: I can do two or three things at the same time.</p>
                <p>I tend to be critical of how things are done.</p>
                `,
        },
      };

      function renderStep1Options() {
        const step1OptionsDiv = document.getElementById("step-1-options");
        step1OptionsDiv.innerHTML = "";
        ["A1", "V1", "K1"].forEach((opt) => {
          const div = document.createElement("div");
          div.textContent = opt;
          div.className =
            "option-card" +
            (selectedOption1 === opt ? " selected" : "") +
            (selectedOption1 !== null ? " disabled" : "");
          div.onclick = () => {
            if (selectedOption1 === null) chooseOption1(opt);
          };
          step1OptionsDiv.appendChild(div);
          if (mindPatternStepDescriptions[opt]) {
            const descDiv = document.createElement("div");
            descDiv.innerHTML =
              mindPatternStepDescriptions[opt].pattern +
              mindPatternStepDescriptions[opt].description;
            descDiv.className = "details";
            div.appendChild(descDiv);
          }
        });
      }

      function renderStep2Options() {
        const step2OptionsDiv = document.getElementById("step-2-options");
        step2OptionsDiv.innerHTML = "";
        if (!selectedOption1) return;
        const options = step2OptionsMap[selectedOption1];
        options.forEach((opt) => {
          const div = document.createElement("div");
          div.textContent = opt;
          div.className =
            "option-card" +
            (selectedOption2 === opt ? " selected" : "") +
            (selectedOption2 !== null ? " disabled" : "");
          div.onclick = () => {
            if (selectedOption2 === null) chooseOption2(opt);
          };
          step2OptionsDiv.appendChild(div);
        });
      }

      function renderStep3Options() {
        const step3Div = document.getElementById("step-3");
        const step3OptionsDiv = document.getElementById("step-3-options");
        step3OptionsDiv.innerHTML = "";
        if (!selectedOption1 || !selectedOption2) {
          step3Div.style.display = "none";
          document.getElementById("change-choices").style.display = "none";
          document.getElementById("confirm-choice").style.display = "none";
          return;
        }
        const options =
          step3OptionsMap[selectedOption1]?.[selectedOption2] || [];
        if (options.length === 0) {
          step3Div.style.display = "none";
          document.getElementById("change-choices").style.display = "none";
          document.getElementById("confirm-choice").style.display = "none";
          return;
        }
        step3Div.style.display = "block";
        // Show Change/Confirm buttons when Step 3 is visible
        document.getElementById("change-choices").style.display =
          "inline-block";
        document.getElementById("confirm-choice").style.display =
          "inline-block";
        // Show the only option as a static card
        const staticDiv = document.createElement("div");
        staticDiv.textContent = options[0];
        staticDiv.className = "option-card selected";
        step3OptionsDiv.appendChild(staticDiv);
      }

      function chooseOption1(option) {
        selectedOption1 = option;
        selectedOption2 = null;
        selectedOption3 = null;
        renderStep1Options();
        renderStep2Options();
        renderStep3Options();
        // Clear result/details if changing
        document.getElementById("result").style.display = "none";
        document.getElementById("details").style.display = "none";
        document.getElementById("change-choices").style.display = "none";
        document.getElementById("confirm-choice").style.display = "none";
      }

      function chooseOption2(option) {
        selectedOption2 = option;
        selectedOption3 = null;
        renderStep2Options();
        renderStep3Options();
        // Only show result after step 3
      }

      // Step 3 is static, so auto-select the only option when Step 3 is shown
      function chooseOption3(option) {
        // No-op: Step 3 is static
      }

      function showResult() {
        if (!selectedOption1 || !selectedOption2) return;
        // Step 3 is static, so auto-select the only option
        const options =
          step3OptionsMap[selectedOption1]?.[selectedOption2] || [];
        if (options.length === 1) {
          selectedOption3 = options[0];
        } else {
          selectedOption3 = null;
        }
        if (!selectedOption3) return;
        const resultDiv = document.getElementById("result");
        let mindPattern = "";
        if (
          mindPatternMap[selectedOption1] &&
          mindPatternMap[selectedOption1][selectedOption2]
        ) {
          mindPattern = mindPatternMap[selectedOption1][selectedOption2];
        } else {
          mindPattern = `${selectedOption1} + ${selectedOption2} + ${selectedOption3}`;
        }
        resultDiv.textContent = `Your Mind Pattern: ${mindPattern}`;
        resultDiv.style.display = "block";
      }

      function resetQuiz() {
        selectedOption1 = null;
        selectedOption2 = null;
        selectedOption3 = null;
        document.getElementById("result").style.display = "none";
        document.getElementById("details").style.display = "none";
        document.getElementById("change-choices").style.display = "none";
        document.getElementById("confirm-choice").style.display = "none";
        renderStep1Options();
        renderStep2Options();
        renderStep3Options();
      }

      function showDetails() {
        const detailsDiv = document.getElementById("details");
        let mindPattern = "";
        if (
          mindPatternMap[selectedOption1] &&
          mindPatternMap[selectedOption1][selectedOption2]
        ) {
          mindPattern = mindPatternMap[selectedOption1][selectedOption2];
        } else {
          mindPattern = `${selectedOption1} + ${selectedOption2} + ${selectedOption3}`;
        }
        detailsDiv.textContent = `Details about Mind Pattern ${mindPattern}:\nThis is a placeholder for more information.`;
        detailsDiv.style.display = "block";
      }

      // Initial render
      renderStep1Options();
      renderStep2Options();
      renderStep3Options();
    </script>
  </body>
</html>
